debathena-reactivate (2.0.12) unstable; urgency=low

  * Transform /etc/default/schroot to end sessions, not recover them
  * Add build-depends on schroot

 -- Jonathan Reed <jdreed@mit.edu>  Thu, 25 Mar 2010 12:46:37 -0400

debathena-reactivate (2.0.11) unstable; urgency=low

  * Fix a typo in 2.0.9.
  * Merge reactivate's CUPS-restarting logic, which waits for BrowsePolling to
    complete, with debathena-cupsys-config's, which checks to make sure
    that cups is running first, and use a common file for both.

 -- Geoffrey Thomas <geofft@mit.edu>  Mon, 08 Mar 2010 17:21:25 -0500

debathena-reactivate (2.0.10) unstable; urgency=low

  * Be more robust in the preinst when fixing schroot.conf.
  * Bump the debhelper compatibility level as high as we can.

 -- Evan Broder <broder@mit.edu>  Sat, 06 Mar 2010 02:59:55 -0500

debathena-reactivate (2.0.9) unstable; urgency=low

  * Reboot on update if we haven't rebooted for the bind-mount fix from
    2.0.8 already.
  * Bump standards version (no changes required).

 -- Evan Broder <broder@mit.edu>  Wed, 03 Mar 2010 12:05:07 -0500

debathena-reactivate (2.0.8) unstable; urgency=low

  * Fix the check to determine whether we have already bind-mounted
    /media. (Trac: #493)
  * Clean up the per-user files cached locally by the new gdm.
    (Trac: #527)
  
 -- Robert Basch <rbasch@mit.edu>  Mon, 01 Mar 2010 09:52:26 -0500

debathena-reactivate (2.0.7) unstable; urgency=low

  * /lib/init/mount-functions.sh is gone as a side effect of Karmic
    increasingly _actually_ using Upstart, so stop using it and just
    implement the (very small) logic we wanted from it ourselves.
  * Add a two-minute timeout to postinst code that could be an infinite
    loop in appropriately unfortunate circumstances.

 -- Geoffrey Thomas <geofft@mit.edu>  Sat, 13 Feb 2010 00:47:52 -0500

debathena-reactivate (2.0.6) unstable; urgency=low

  * Permit (possibly-backported) upstream schroot at a version that
    includes our patches as an alternative to the debathena-schroot
    dependency.

 -- Geoffrey Thomas <geofft@mit.edu>  Fri, 12 Feb 2010 00:44:06 -0500

debathena-reactivate (2.0.5) unstable; urgency=low

  * Bind-mount /boot (read-only) and /var/log (read-write), but not
    /home. (Trac: #314)
  * Deter people from thinking that /home will persist by getting rid of
    it in the chroot.

 -- Evan Broder <broder@mit.edu>  Mon, 18 Jan 2010 08:29:07 -0500

debathena-reactivate (2.0.4) unstable; urgency=low

  * Add some convenience functions to snapshot-run for running commands in
    the chroot.
  * Make sure that a group exists before we add users to it.
  * Ignore removal of the CUPS remote queue cache.

 -- Evan Broder <broder@mit.edu>  Mon, 21 Dec 2009 12:34:02 -0500

debathena-reactivate (2.0.3) unstable; urgency=low

  * Now that policy-rc.d isn't blindly allowing stops and starts for
    anything in the chroot, we should be sure that the chroot actually
    knows it's a chroot before we try to start CUPS in it.

 -- Evan Broder <broder@mit.edu>  Mon, 23 Nov 2009 16:14:12 -0500

debathena-reactivate (2.0.2) unstable; urgency=low

  * Clean up the CUPS remote queue cache on logout and package upgrades.
  * Fix the policy-rc.d to actually allow for restarting cups and cupsys
    inside the chroot. Apparently pipes can delineate patterns, but don't
    mean anything within a single pattern, such as the one one pattern
    that results from variable expansion.

 -- Evan Broder <broder@mit.edu>  Mon, 23 Nov 2009 15:51:42 -0500

debathena-reactivate (2.0.1) unstable; urgency=low

  * Various bugfixes:
    - Preserve the KRBTKFILE and KRB5CCNAME variables when running
      schroot. (Trac: #441)
    - Run root commands in /, not $HOME.

 -- Evan Broder <broder@mit.edu>  Tue, 17 Nov 2009 18:12:45 -0500

debathena-reactivate (2.0) unstable; urgency=low

  * Rewrite to use schroot 1.3 and aufs union mounts instead of LVM.
    This makes logins on a Dell 760 take about 8 seconds to reach the
    desktop.

 -- Geoffrey Thomas <geofft@mit.edu>  Sun, 08 Nov 2009 16:36:48 -0500

debathena-reactivate (1.25.6) unstable; urgency=low

  * Fix init script metadata (overlooked in 1.21).

 -- Geoffrey Thomas <geofft@mit.edu>  Fri, 16 Oct 2009 23:57:22 -0400

debathena-reactivate (1.25.5) unstable; urgency=low

  * geofft's transformation of /etc/pam.d/su was running outside the
    chroot, and editing the file in place, thus clobbering the symlink. We
    need to fix all of this in the postinst.

 -- Evan Broder <broder@mit.edu>  Wed, 14 Oct 2009 14:47:45 -0400

debathena-reactivate (1.25.4) unstable; urgency=low

  * Always lecture users trying to sudo on quickstations.
  * Stop editing /etc/pam.d/sudo in the snapshot setup, since we're no
    longer diverting it.

 -- Evan Broder <broder@mit.edu>  Wed, 14 Oct 2009 13:52:32 -0400

debathena-reactivate (1.25.3) unstable; urgency=low

  * Specify both of the lecture files in /etc/sudoers: error for
    everybody, and warning for the admin group. The latter overrides the
    former.

 -- Evan Broder <broder@mit.edu>  Wed, 14 Oct 2009 12:39:11 -0400

debathena-reactivate (1.25.2) unstable; urgency=low

  [ Evan Broder ]
  * Use PAM instead of the sudo lecture_file to lecture users.

  [ Geoffrey Thomas ]
  * Do that only outside the cluster login session, and preserve
    lecture_file within the chroot.
  * Revert 1.25.1, since it doesn't actually change anything.

 -- Geoffrey Thomas <geofft@mit.edu>  Wed, 14 Oct 2009 08:58:58 -0400

debathena-reactivate (1.25.1) unstable; urgency=low

  * Display the sudo lecture file for all users, not just the admin
    group. This ensures it will show on quickstations, not just clusters.

 -- Evan Broder <broder@mit.edu>  Sun, 11 Oct 2009 12:20:11 -0400

debathena-reactivate (1.25) unstable; urgency=low

  * Don't put the user in a login snapshot on a quickstation.

 -- Evan Broder <broder@mit.edu>  Wed, 07 Oct 2009 11:45:09 -0400

debathena-reactivate (1.24) unstable; urgency=low

  * Change back to mounting the login snapshot as ext3, since that was
    substantially hurting performance.

 -- Evan Broder <broder@mit.edu>  Mon, 05 Oct 2009 10:12:40 -0400

debathena-reactivate (1.23) unstable; urgency=low

  * Mount the login snapshot file system as ext2, with noatime.

 -- Robert Basch <rbasch@mit.edu>  Wed, 30 Sep 2009 17:49:49 -0400

debathena-reactivate (1.22) unstable; urgency=low

  * Use the new /usr/share/debathena-gdm-config/{Pre,Post}Session.d
    directories in gdm-config.

 -- Evan Broder <broder@mit.edu>  Mon, 28 Sep 2009 14:44:49 -0400

debathena-reactivate (1.21) unstable; urgency=low

  * Avoid sound during first login (Trac: 292).

 -- Michael Mekonnen <mikemeko@mit.edu>  Sun, 20 Sep 2009 15:31:13 -0400

debathena-reactivate (1.20.1) unstable; urgency=low

  * Use the right debian/rules variable for removing files.

 -- Evan Broder <broder@mit.edu>  Wed, 17 Jun 2009 23:21:08 -0400

debathena-reactivate (1.20) unstable; urgency=low

  * Remove the autostart .desktop files for jockey-gtk and update-notifier
    so that users don't get notifications about things they can't change.

 -- Evan Broder <broder@mit.edu>  Wed, 17 Jun 2009 23:07:00 -0400

debathena-reactivate (1.19.1) unstable; urgency=low

  * Make the warning for su appear above the Password: prompt, instead of
    below it.

 -- Geoffrey Thomas <geofft@mit.edu>  Mon, 18 May 2009 19:45:39 -0400

debathena-reactivate (1.19) unstable; urgency=low

  * Display a warning about the login snapshots, once per session
    for sudo and every time you su.

 -- Geoffrey Thomas <geofft@mit.edu>  Fri, 15 May 2009 02:35:03 -0400

debathena-reactivate (1.18) unstable; urgency=low

  * Send SIGTERM before SIGKILL when cleaning up user processes
    using the bind mounts, to give them a chance to exit cleanly.

 -- Robert Basch <rbasch@mit.edu>  Tue, 24 Mar 2009 17:24:07 -0400

debathena-reactivate (1.17) unstable; urgency=low

  * Even more verbosity! Use fuser -kmv to get more output about the
    running processes.

 -- Evan Broder <broder@mit.edu>  Wed, 18 Mar 2009 19:25:53 -0400

debathena-reactivate (1.16) unstable; urgency=low

  * Don't redirect output to /dev/null when we're trying to log it

 -- Evan Broder <broder@mit.edu>  Mon, 16 Mar 2009 20:18:52 -0400

debathena-reactivate (1.15) unstable; urgency=low

  * Include timing information in the logging.

 -- Evan Broder <broder@mit.edu>  Mon, 16 Mar 2009 08:28:51 -0400

debathena-reactivate (1.14) unstable; urgency=low

  * Add instrumentation to track why reactivations are failing.

 -- Evan Broder <broder@mit.edu>  Thu, 12 Mar 2009 20:06:10 -0400

debathena-reactivate (1.13) unstable; urgency=low

  * Instead of generating policy-rc.d at login time, have a general
    policy-rc.d that works both inside and outside of the chroot. This
    fixes a potential issue if there's a reboot during a login session.

 -- Evan Broder <broder@mit.edu>  Sat, 07 Mar 2009 17:20:01 -0500

debathena-reactivate (1.12) unstable; urgency=low

  * Restart a provided list of daemons inside the chroot at login.

 -- Evan Broder <broder@mit.edu>  Thu, 05 Mar 2009 20:46:25 -0500

debathena-reactivate (1.11) unstable; urgency=low

  * Work around an schroot bug that causes you to get dropped from all of
    your groups.

 -- Evan Broder <broder@mit.edu>  Wed, 04 Mar 2009 22:01:39 -0500

debathena-reactivate (1.10) unstable; urgency=low

  * Ignore failure to umount /media.

 -- Robert Basch <rbasch@mit.edu>  Mon, 23 Feb 2009 12:41:53 -0500

debathena-reactivate (1.9) unstable; urgency=low

  * Added /dev/pts and /dev/shm to the bind-mount list such that matlab and
    mathematica can run.
  * Made /media a shared mount (which also required pre-bind-mounting it
    to itself) so that USB automounts are visible inside the chroot.
  * Reversed the order of unmounting such that it's more likely to succeed.

 -- andrew m. boardman <amb@mit.edu>  Thu, 19 Feb 2009 16:51:30 -0500
	
debathena-reactivate (1.8) unstable; urgency=low

  * Try to kill remaining user processes using any of the login
    chroot's bind mounts at session end.
  * Don't die upon failure to umount any of the bind mounts at
    session end; this should force a reboot after the umount of
    the chroot mountpoint fails.

 -- Robert Basch <rbasch@mit.edu>  Sat, 07 Feb 2009 18:38:45 -0500

debathena-reactivate (1.7) unstable; urgency=low

  * Configure locate's cron job to not walk /login.

 -- Tim Abbott <tabbott@mit.edu>  Sat, 07 Feb 2009 17:23:01 -0500

debathena-reactivate (1.6) unstable; urgency=low

  * Fix typo in schroot configuration (environment_filter should be
    environment-filter).

 -- Tim Abbott <tabbott@mit.edu>  Sat, 31 Jan 2009 15:00:34 -0500

debathena-reactivate (1.5) unstable; urgency=low

  * Remove DEB_AUTO_UPDATE_DEBIAN_CONTROL.
  * Change "Debian-Athena Project" to "Debathena Project".
  * Remove debian/control from version control.
  * Clean up debian/copyright.

 -- Tim Abbott <tabbott@mit.edu>  Sat, 24 Jan 2009 18:59:19 -0500

debathena-reactivate (1.4) unstable; urgency=low

  * Add the user to more groups when they login.

 -- Evan Broder <broder@mit.edu>  Sat, 24 Jan 2009 13:36:03 -0500

debathena-reactivate (1.3) unstable; urgency=low

  * Ensure the sound card volume levels are set to 0 at session end.

 -- Robert Basch <rbasch@mit.edu>  Tue, 16 Dec 2008 19:30:25 -0500

debathena-reactivate (1.2) unstable; urgency=low

  * Rewrite to use login chroots.

 -- Greg Hudson <ghudson@mit.edu>  Fri, 22 Aug 2008 15:30:57 -0400

debathena-reactivate (1.1) unstable; urgency=low

  * Initial release.

 -- Greg Hudson <ghudson@mit.edu>  Thu, 14 Aug 2008 16:27:15 -0400
