#!/bin/sh

# This script is invoked by /etc/gdm/PostSession/Default on cluster
# machines.  Its job is to help ensure the smooth reusability of the
# workstation.

# gdm waits until this script completes before presenting a login
# screen for the next user, so we shouldn't take too much time in the
# normal case.

# DISPLAY is set but the X server might be dead in some cases, so we
# have to be careful about using it.  If we're going to take a long
# time, we should probably try to display an indication of that to the
# X server.  That is not currently implemented.

# Right now, all we do is hook into the auto-update package if it is
# installed.  In the future, we might perform cleanups such as killing
# user processes, possibly by hooking into a verification package if
# one is installed.

[ -x /usr/sbin/athena-auto-update ] && /usr/sbin/athena-auto-update reactivate

exit 0
